{
    "category" : "rdb",
    "connection_id" : "mariadb_connector",

    "desc" : [        
        
    ],

    "query_map":
    [

	    {
            "desc" : "browser request",
            "key": "rdb_insert_to_browse_info",
	        "action" : "execute",
            "query" : "INSERT INTO LLM_DATA.PROMPT_REQUEST(AGENT_ID, REG_DATE, PROMPT_QUERY, SESSION_ID, USER_ROLE, ALLOWED, MODIFIED_QUERY, REASON) VALUES 
            ({agent_id}, '{reg_date}', '{prompt_query}', '{session_id}','{user_role}', {allowed}, '{modified_query}', '{reason}')"
        },

        {
            "desc" : "llm request",
            "key": "rdb_insert_to_llm_request_info",
	        "action" : "execute",
            "query" : "INSERT INTO LLM_DATA.LLM_REQUEST(AGENT_ID, REG_DATE, MESSAGES, LLM_KEY, ITERATION, STREAM, ALLOWED, SOURCE) VALUES 
            ({AGENT_ID}, '{REG_DATE}', '{MESSAGES}', '{LLM_KEY}', {ITERATION}, {STREAM}, {ALLOWED}, '{SOURCE}')"
        },

        {
            "desc" : "mcp call request",
            "key": "rdb_insert_to_mcp_call_info",
	        "action" : "execute",
            "query" : "INSERT INTO LLM_DATA.MCP_CALL_REQUEST(AGENT_ID, REG_DATE, SERVER_NAME, TOOL_NAME, ARGUMENTS, ALLOWED, SOURCE) VALUES 
            ({AGENT_ID}, '{REG_DATE}', '{SERVER_NAME}', '{TOOL_NAME}', '{ARGUMENTS}', {ALLOWED}, '{SOURCE}')"
        },

        {
            "desc" : "AI 서비스, 계정 추가 (과거)",
            "key": "deprecate_rdb_insert_update_ai_user_account",
	        "action" : "execute",
            "query" : "INSERT INTO app.AI_USER_ACCOUNT(USER_ID, REG_DATE, EMAIL, AI_SERVICE, ETC_COMMENT, USE_FLAG) VALUES 
            ('{user_id}', '{reg_date}', '{email}', {ai_service}, '{etc_comment}', {use_flag})
            ON DUPLICATE KEY UPDATE                
                REG_DATE = VALUES(REG_DATE),
                EMAIL = VALUES(EMAIL),
                AI_SERVICE = VALUES(AI_SERVICE),
                ETC_COMMENT = VALUES(ETC_COMMENT),
                USE_FLAG = VALUES(USE_FLAG)"
        },

        {
            "desc" : "AI 서비스, 계정 추가 (신규)",
            "key": "rdb_insert_update_ai_user_account",
	        "action" : "execute",
            "query" : "INSERT INTO app.users(id, email, ai_service_id) VALUES  ('{uuid}', '{email}', '{email}', '{ai_service_id}')"
        }

    ]
}

